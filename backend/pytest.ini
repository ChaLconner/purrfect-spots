[pytest]
# Pytest configuration for Purrfect Spots backend tests

# Test directories
testpaths = tests

# Python path
pythonpath = .

# Output settings
addopts = -v --tb=short --color=yes

# Async mode for pytest-asyncio
asyncio_mode = auto

# Filter warnings from external libraries (can't fix these)
filterwarnings =
    # Ignore deprecation warnings from external libraries
    ignore:.*asyncio.iscoroutinefunction.*:DeprecationWarning:slowapi.*
    ignore:.*asyncio.iscoroutinefunction.*:DeprecationWarning:sentry_sdk.*
    ignore:.*asyncio.iscoroutinefunction.*:DeprecationWarning:asyncio.*
    # Ignore Pillow deprecation warning (scheduled for Pillow 14)
    ignore:.*Image.Image.getdata.*:DeprecationWarning
    # Ignore datetime.utcnow warnings from any remaining code or libraries
    ignore:.*datetime.datetime.utcnow.*:DeprecationWarning
    # Ignore general deprecation from starlette/fastapi integration
    ignore::DeprecationWarning:starlette.*
    ignore::DeprecationWarning:fastapi.*

# Coverage settings
# Run with: pytest --cov=. --cov-report=html
# Minimum coverage threshold
# [coverage:report]
# fail_under = 70

